---
layout: post
title: Use multi_db=True for testing with multiple Django dbs
date: March 16, 2015
date_title: march-16-2015
day: 16
month: 3
year: 2015
---
<!-- MAIN CONTENT -->

  
<p>
   When you have configured multiple databases in django, and are testing those models in unit tests, you will notice that the objects create in the models that are part of the<em>non-default</em> database, tend to not get cleaned up. This messes up other tests if ever you do a counts on the objects created/filtered since the test db gets poluted with the non deleted data.
</p>
<p>
    A quick fix would be to define the <code>def tearDown:</code> to delete all the objects of the model being tested from the non-default model. 
</p>
<p>
    However, Django is much smarter than you think. There is a global variable that you can set called <code>multi_db=True</code> which cleans up objects from non-default databases as well!!
</p> 